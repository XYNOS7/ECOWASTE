The error message:

```
Error: new row for relation "waste_reports" violates check constraint "waste_reports_status_check"
```

means you're trying to update the `status` field of a row in the `waste_reports` table to a **value that is not allowed** by the database constraint.

---

### üîç Why This Happens

Your Supabase schema for `waste_reports` has this constraint:

```sql
status text DEFAULT 'pending'::text CHECK (status = ANY (ARRAY['pending'::text, 'in-progress'::text, 'collected'::text, 'rejected'::text]))
```

This means **only these 4 values are valid**:

* `'pending'`
* `'in-progress'`
* `'collected'`
* `'rejected'`

---

### ‚úÖ Solution

You are most likely trying to set a status like `"waiting"` or `"completed"` ‚Äî **which is invalid** according to the database constraint.

---

### üõ†Ô∏è Fix Options

#### ‚úÖ Option 1: Fix Your Code (Recommended)

In your code (probably `updateStatus` in `admin-dashboard-screen.tsx`), **ensure you only use one of the allowed values**:

```ts
await database.wasteReports.updateStatus(reportId, 'collected') // ‚úÖ allowed
```

Use one of: `'pending'`, `'in-progress'`, `'collected'`, `'rejected'`

You must **not** use `'waiting'` or `'completed'` for this table unless you update the schema.

---

#### ‚úÖ Option 2: Update the Constraint (if you really want to allow new status values)

If you want to add statuses like `"waiting"` and `"completed"` to the `waste_reports` table, run this SQL in Supabase:

```sql
ALTER TABLE waste_reports
DROP CONSTRAINT waste_reports_status_check;

ALTER TABLE waste_reports
ADD CONSTRAINT waste_reports_status_check
CHECK (status = ANY (ARRAY['pending', 'in-progress', 'collected', 'rejected', 'waiting', 'completed']));
```

But make sure your **code, UI and logic** are all updated accordingly to support these extra states.

---

### ‚úÖ Final Tip

To debug these more easily, **always log the `status` value** before calling update:

```ts
console.log('Attempting to update status to:', status)
```

Let me know if you‚Äôd like me to update your DB schema for more status values, or help enforce a new status flow (like: `pending ‚Üí waiting ‚Üí in-progress ‚Üí collected`).
